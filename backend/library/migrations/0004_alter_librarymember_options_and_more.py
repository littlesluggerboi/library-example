# Generated by Django 5.2.4 on 2025-07-31 22:55

import datetime
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('library', '0003_remove_author_date_of_birth_lte_today_and_more'),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='librarymember',
            options={'verbose_name': 'member', 'verbose_name_plural': 'members'},
        ),
        migrations.RemoveConstraint(
            model_name='author',
            name='date_of_birth_lte_today',
        ),
        migrations.RemoveConstraint(
            model_name='author',
            name='date_of_death_lte_today',
        ),
        migrations.RemoveConstraint(
            model_name='book',
            name='publication_date_cannot_be_after_today',
        ),
        migrations.RemoveConstraint(
            model_name='bookinstance',
            name='date_borrowed_null_or_gte_today',
        ),
        migrations.AddField(
            model_name='bookinstance',
            name='borrower',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.RESTRICT, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddConstraint(
            model_name='author',
            constraint=models.CheckConstraint(condition=models.Q(('date_of_birth__isnull', True), ('date_of_birth__lte', datetime.datetime(2025, 7, 31, 22, 55, 26, 768476, tzinfo=datetime.timezone.utc)), _connector='OR'), name='date_of_birth_lte_today'),
        ),
        migrations.AddConstraint(
            model_name='author',
            constraint=models.CheckConstraint(condition=models.Q(('date_of_death__isnull', True), ('date_of_death__lte', datetime.datetime(2025, 7, 31, 22, 55, 26, 768510, tzinfo=datetime.timezone.utc)), _connector='OR'), name='date_of_death_lte_today'),
        ),
        migrations.AddConstraint(
            model_name='book',
            constraint=models.CheckConstraint(condition=models.Q(('publication_date__isnull', True), ('publication_date__lte', datetime.datetime(2025, 7, 31, 22, 55, 26, 769177, tzinfo=datetime.timezone.utc)), _connector='OR'), name='publication_date_cannot_be_after_today'),
        ),
        migrations.AddConstraint(
            model_name='bookinstance',
            constraint=models.CheckConstraint(condition=models.Q(('date_borrowed__isnull', True), ('date_borrowed__gte', datetime.datetime(2025, 7, 31, 22, 55, 26, 771098, tzinfo=datetime.timezone.utc)), _connector='OR'), name='date_borrowed_null_or_gte_today'),
        ),
    ]
